<!DOCTYPE html>
<html>
<head>
    <title>Gerar Índice de Prescrições</title>
</head>
<body>
    <h1>Gerador de Índice</h1>
    <button onclick="gerarIndice()">Gerar Índice</button>
    <pre id="resultado"></pre>

    <script>
        // LISTA DE ARQUIVOS EXISTENTES - ATUALIZE ESTA LISTA
        const arquivosExistentes = [
            'urgencia/crise-respiratoria.json',
            'urgencia/asma-aguda.json', 
            'consulta/rinossinusite.json'
            // ADICIONE NOVOS ARQUIVOS AQUI
        ];

        async function gerarIndice() {
            const indice = {
                geradoEm: new Date().toISOString(),
                totalArquivos: arquivosExistentes.length,
                arquivos: []
            };

            for (const caminho of arquivosExistentes) {
                try {
                    const response = await fetch(`../js/prescricoes/${caminho}`);
                    if (response.ok) {
                        const dados = await response.json();
                        indice.arquivos.push({
                            caminho: caminho,
                            id: dados.id,
                            nome: dados.nome,
                            categoria: dados.categoria,
                            faixa: dados.faixa,
                            tipo: dados.tipo
                        });
                    }
                } catch (e) {
                    console.log(`Erro em ${caminho}:`, e);
                }
            }

            const indiceJSON = JSON.stringify(indice, null, 2);
            document.getElementById('resultado').textContent = indiceJSON;
            
            // Copiar para área de transferência
            navigator.clipboard.writeText(indiceJSON);
            alert('Índice gerado e copiado! Cole em js/prescricoes/indice.json');
        }
    </script>
</body>
</html>
